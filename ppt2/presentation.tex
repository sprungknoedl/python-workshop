\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage{graphicx}
\usepackage{lmodern}
\usepackage{listings}
\usepackage{xcolor}

\lstset{
    language=Python,
    basicstyle=\scriptsize,
    breakatwhitespace=true,breaklines=true,%
    tabsize=2, % Tabulatorbreite
    showstringspaces=false
}

\hypersetup{
    pdftitle={\inserttitle},
    pdfsubject={\inserttitle},
    pdfauthor={\insertauthor},
    pdfkeywords={\inserttitle},
    pdfstartview={FitH}
}

\usetheme{Pittsburgh}
\usecolortheme{whale}
\beamertemplatenavigationsymbolsempty
\titlegraphic{\includegraphics[height=2cm]{hk-logo.png}}

\title[Python Workshop]{Hackinggroup -- Python Workshop -- Part 2}
\subtitle{A tale about dutch ducks with a fable for British comedy}
\author[Thomas Kastner, Michael Rodler]{Thomas Kastner\and Michael Rodler}
\date{\today}

\begin{document}

\begin{frame}
    \titlepage
\end{frame}

\section*{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
    \frametitle{Introduction -- Wer san ma denn?}

    \begin{block}{Michael Rodler}
    \begin{itemize}
        \item aka f0rk, f0rki, f0rkmaster, Gabel, etc.
        \item Student SIB09
        \item 3 years coding python for fun
        \item 3 months coding python for profit
    \end{itemize}
    \end{block}

    \begin{block}{Thomas Kastner}
    \begin{itemize}
        \item aka br3z3l, tom
        \item Student SIB08
        \item 4 years coding python for fun
    \end{itemize}
    \end{block}
\end{frame}


\begin{frame}[fragile]
    \frametitle{Table of contents -- Wos ma heit mochn}
    \tableofcontents
    And because it's called a \emph{Workshop} we will also write some code together ;)
\end{frame}

\section{Some stuff we forgot}	% fork
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
	\frametitle{more syntactic sugar}

	\begin{exampleblock}{python -- syntactic sugar}
	\begin{lstlisting}
>>> a = ""; b = "foo"
>>> x = a or b
>>> x = "a" * 21
>>> x = [1,2,3] * 5
	\end{lstlisting}
	\end{exampleblock}

	\begin{exampleblock}{python -- some operators}
	\begin{lstlisting}
>>> x = 42**2 % 1337
>>> 0xD5 & 0377 ^ 0xFF
	\end{lstlisting}
	\end{exampleblock}	
	
	\begin{exampleblock}{python -- converting types}
	\begin{lstlisting}
>>> str(42)
>>> list((1,2,3,4))
>>> int("42")	
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

% sys und os usen (systemnah programmieren)
% os.FORK!!!!
\begin{frame}[fragile]
	\frametitle{os -- some more stuff}
	\begin{exampleblock}{python -- os}
	\begin{lstlisting}
>>> os.getloadavg()
>>> if os.getuid():
...     os.setuid(1000)
>>> open(os.devnull, 'w').write('This is sent to nirvana')
>>> os.killpg(1337,9)
	\end{lstlisting}
	\end{exampleblock}
\pause
	\begin{exampleblock}{python -- a fork bomb}
	\begin{lstlisting}
import os
while True:
    pid = os.fork()
    if not pid:
        print "Hello I'm a child :D"
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

% system befehle ausfÃ¼hren (subprocess)
\begin{frame}[fragile]
	\frametitle{subprocces -- execute processes}
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> p = subprocess.Popen(["ls", "-l", "-a"])
>>> retval = subprocess.call(["rm", "-f", "./somefile"])
	\end{lstlisting}
	\end{exampleblock}
\pause
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> filename = input("What file would you like to display?\n")
>>> subprocess.call("cat " + filename, shell=True)
	\end{lstlisting}
	\end{exampleblock}
\pause
	type in "non\_existent; rm -rf / \#"\\
	Oh noes, command injection... this is bad ;)
\end{frame}

% REGEX!
\begin{frame}[fragile]
	\frametitle{re -- regex again}
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> r = re.compile(r"(\w{31}=)")
>>> m = r.search("This is some random Text eS4H0NWnnFGd8cCUavc6m2DwjRUzm6h= which contains a flag ;)")
>>> if m:
...     print m.groups()
	\end{lstlisting}
	\end{exampleblock}
\pause
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> r = re.compile(r"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}")
>>> valid = r.match("10.13.37.0") is not None
>>> valid = r.match(" 10.13.37.0") is not None
>>> valid = r.search(" 10.13.37.0") is not None
	\end{lstlisting}
	\end{exampleblock}
\end{frame}


\section{Python performance}	% tom
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{List Comprehensions}	% tom
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
	\frametitle{List Comprehension and Generator Expression}
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> n = [ i**2 for i in range(100) if i & 1 == 0 ]
>>> import os
>>> zipfiles = [ s for s in os.listdir(".") if s.endswith(".zip") ]
	\end{lstlisting}
	\end{exampleblock}
	
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> for x in ( )
>>> def f(arg):
...     do_something_with(arg)
>>> x = f( s for s in blafu )
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

\section{Exceptions}	% DONE
%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]
	\frametitle{Exceptions -- oda wenn ois ind luft gehd}
	\begin{exampleblock}{python}
	\begin{lstlisting}
try:
    f = open("/dev/missing", "r")
except IOError, e:
    sys.stderr.write("Error: %s\n" % e.message)
    sys.exit(1)
	\end{lstlisting}
	\end{exampleblock}

\pause

	\begin{exampleblock}{python}
	\begin{lstlisting}
try:
    import threading as _threading
except ImportError:
    import dummy_threading as _threading
	\end{lstlisting}
	\end{exampleblock}
	
	It's easier to ask for forgiveness than permission (EAFP)
\end{frame}

\section{Object Oriented Programming}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% EVERYTHING IS AN OBJECT!
\begin{frame}[plain]
	\begin{center}
	\huge{\textbf{EVERYTHING IS AN OBJECT!}}
	\end{center}
\end{frame}

% Creating classes		-- fork
	% new-style --> like the ability to subclass most built-in types
% Konstruktor			-- fork
\begin{frame}[fragile]
	\frametitle{Class definition}
	\begin{exampleblock}{python}
	\begin{lstlisting}
>>> class MyClass(object):
...     def __init__(self, y):
...         self.x = 42
...         self.y = y
...     def func(self):
...         return self.x
... 
>>> c = MyClass(21)
>>> print c.func()
>>> print c.y
	\end{lstlisting}
	\end{exampleblock}
	
	explicit inheritance from \emph{object} is needed to specify ''new-style'' classes
\end{frame}

% public/private		-- fork
% dynamic typing, duck typing (or why java-style interfaces suck)	-- tom
% Special Methods (Operator Overloading)							-- tom
% Inheritance		-- fork
\begin{frame}[fragile]
	\frametitle{Inheritance}
	\begin{exampleblock}{python -- multiple inheritance}
	\begin{lstlisting}
>>> class A(object):
...     def foo(self):
...             print "A"
...
>>> class B(object):
...     def foo(self):
...             print "B"
...
>>> class C(A,B):
...     pass
...
>>> class D(B,A):
...     pass
...
>>> c = C()
>>> c.foo()
A
>>> d = D()
>>> d.foo()
B	
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

\section{The Cheeseshop}	% fork
%%%%%%%%%%%%%%%%%%%%%%%%
% cheeseshop, easy_install, pip

\begin{frame}[fragile]
	\frametitle{The cheeseshop -- installing stuff}
	Python Package Index\\
	\url{http://pypi.python.org}
	\begin{exampleblock}{python}
	\begin{lstlisting}[language=bash]
[fork@workshop ~]$ easy_install pelican
[fork@workshop ~]$ easy_install pip
[fork@workshop ~]$ pip uninstall pelican
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

\section{Advanced harvesting}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\subsection*{urllib}	% fork
\begin{frame}[fragile]
	\frametitle{urllib, urllib2 -- working with URLs}
	\begin{exampleblock}{python -- url as as file like}
	\begin{lstlisting}
>>> site = urllib.urlopen("http://f0rki.at")
>>> print f.read()
	\end{lstlisting}
	\end{exampleblock}
\pause	
	\begin{exampleblock}{python -- url encoding}
	\begin{lstlisting}
>>> import urllib
>>> params = urllib.urlencode({'spam': 1, 'eggs': 2, 'bacon': 0})
>>> f = urllib.urlopen("http://www.example.com/cgi-bin/query", params)
>>> print f.read()
	\end{lstlisting}
	\end{exampleblock}
\end{frame}

\subsection*{mechanize} % fork
\subsection*{twisted}	% tom
\subsection*{multithreaded / concurrent}	% tom

\section{FYI}
%%%%%%%%%%%%%

\subsection*{some low level stuff}	% fork
% linksammlung

\begin{frame}
	\frametitle{struct -- working with binary data}
	% codesnippet
\end{frame}

\begin{frame}
	\frametitle{ctypes -- accessing c functions}
	\emph{PyDbg} -- scriptable windows debugger, written in python
\end{frame}

\subsection*{ssh}
	% paramiko

\subsection*{network}
	% twisted
	% asyncore/asynchat (builtin)

\subsection*{web programming}
	% django
	% cherrypy
	% jinja2
	% ...

\subsection*{databases}
    % DB API
    % sqlalchemy
    % elixir

\begin{frame}
	\frametitle{References}
	\begin{thebibliography}{3}
	\bibitem{kopf} the authors' epic python knowledge
	\bibitem{pydoc} \url{http://docs.python.org/}
	\end{thebibliography}
\end{frame}

\end{document}